Purpose of this document
------------------------
This document contains a list of minor features and technical stuff that should
be implemented when time permits it. The TODO list is updated frequently as new
ideas crop up during programming.

For a broader view of how the project will develop over time, you should see
the Roadmap document.


Priority 1 (important)
----------------------
- Review weird memory management of GoBoardRegion.points
- Special notification if computer player has passed or resigned
- Code cleanup
  - Remove @synchronized where possible and make properties non-atomic
  - Review properties to see if any can be declared readonly in the public
    interface, then re-declared rewrite in the private class extension
- Add logging; possibly replace asserts; definitely where abort criteria are met
  - Use logging framework instead of NSLog
  - Have a look at this: http://code.google.com/p/cocoalumberjack/
- Testing
  - Test application shutdown to see whether there are no memory leaks
  - Add more unit tests
    - GoPlayer
    - GoMove, GoPoint, GoBoardRegion; the main problem here is that certain
      methods in these classes have large side-effects, while other methods
      are utterly trivial
      -> extract logic and make all methods trivial
    - GoGame; the main problem here is that GoGame relies on GTP responses
      -> we need to substitute GTP client and engine with mock objects
- Find a way to add the opening book to the project resources without
  depending on a fixed path (a fixed path will break if the project is
  compiled on a newer base SDK)
- Give back to Fuego
  - information about how to build for iPhone
  - fix for the configure problem
  - improvements to the Autoconf/Automake configuration, i.e. optional creation
    of a unified library and optional installation of headers
  - Load opening book: Cannot be done via "book_load" GTP command because of
    spaces in the path. The default search paths are 1) executable path: can be
    used via hacking argv[0]; 2) ABS_TOP_SRCDIR/book: no good since we don't
    have the sources; 3) DATADIR/PACKAGE: no good since we don't know the
    folder in advance
  - Building against a release build of Fuego requires that the project needs
    to set the NDEBUG preprocessor macro, even if the project wants to make
    a debug build; this effectively prevents the use of assert()
- Find out how to suspend the GTP engine's threads if the application moves to
  the inactive state (phone call); maybe kill the threads, then restart the
  engine and client at a later time? What about saving the .sgf file in such a
  scenario?
- If the GTP engine is running when the application goes to the background,
  check out if it's possible to let the engine finish processing in the
  background
- Implement a gesture recognizer that reacts immediately to the first touch
  (UITapGestureRecognizer only recognizes the gesture when the finger leaves
  the screen)
- Define protocols for ModelObserver and Model; move some methods from GoGame
  to Model; let GoGame adopt the Model protocol, and the various views and
  controllers adopt ModelObserver. This makes the different roles a little bit
  more explicit
- Little Go sometimes won't let you play on a certain intersection, incorrectly
  thinking that the move is illegal. There are several potential sources for
  this bug:
  - The code that determines whether a move is legal is not correct
  - Some sort of rendering bug: What the user sees in PlayView does not
    correspond to the state in memory


Priority 2 (nice to have)
-------------------------
- Transition to Xcode 4, mainly to get native git support
- In PlayerSelectionController and SetingsViewController: Add human/computer
  symbol to the table view cell depending on the type of the player that the
  cell represents
- Add a note to the "Edit player" view that explains why a player cannot be
  deleted, and some of his attributes cannot be changed, while he is
  participating in the current game
- While panning
  - If the location is invalid, display the reason in the status line
  - If placing a stone would capture other stones, mark up those stones
    and display in the status line how many stones would be captured
  - If placing a stone would set a group (your own or an enemy group) to
    atari, mark up that group
- Go objects should not rely on a globally unique GoGame instance (the shared
  game instance). The following major drawbacks result from this reliance:
  - The shared game instance is nothing but a glorified global variable. It
    introduces a hidden dependency between the implementation of GoGame (the
    initializer which sets the global variable), the other Go classes (which
    access the global variable), and ApplicationDelegate (which must take care
    to deallocate GoGame before creating a new instance)
  - Testability is sub-optimal. With the current implementation, test cases have
    to care about tearing down a GoGame instance before they can set up the
    next instance (similar to ApplicationDelegate)

Future improvements to the 3rdparty build process:
- Build both a debug and a release version of 3rdparty libraries; use the build
  variable $(CONFIGURATION) to set LIBRARY_SEARCH_PATHS. This is important
  so that Little Go no longer needs to set the preprocessor macro NDEBUG in
  a debug build (with NDEBUG set, assert() does not work; possibly there are
  other effects as well)
- Research wether the build variable $(EFFECTIVE_PLATFORM_NAME) exists and what
  values it may take, especially if there are different values for iPhoneOS and
  iPhoneSimulator builds (suspected values are iphoneos and iphonesimulator).
  A list of all official build variables is this:
  http://developer.apple.com/library/mac/#documentation/DeveloperTools/Reference/XcodeBuildSettingRef/1-Build_Setting_Reference/build_setting_ref.html
- Check out the following article to see whether it would make sense to add
  more visible references to external libraries to the Xcode project:
  http://wiki.remobjects.com/wiki/Linking_Custom_Static_Libraries_from_your_iPhone_Xcode_Projects
- Fix build scripts so that configure-based projects can store multiple
  platform builds, so that distclean before a build becomes an option instead
  of a requirement (Boost already supports this)
- Check to see if it makes sense (and is feasible) to create a single universal
  library for Boost in the same way as it is done for Fuego
- Check to see if there is a better way to create the single universal library
  for Fuego than the current clunky way. Possible requires libtool support.
- Check to see whether the compiler options -mmacosx-version-min and
  -miphoneos-version-min may replace usage of the environment variables
  MACOSX_DEPLOYMENT_TARGET and IPHONEOS_DEPLOYMENT_TARGET (note: from studying
  an Xcode compilation command it appears that the iPhoneSimulator platform
  uses -mmacosx-version-min, or MACOSX_DEPLOYMENT_TARGET)
- bjam clean does not work
- Fix the following issue: IPHONE_SIMULATOR_BASESDK_VERSION at the moment (with
  Xcode 3.2.5) cannot be 4.2, must be 4.1, because with 4.2 there are problems
  with symbols in 3rdparty libraries. The symptom is that the application
  crashes with the following output in the debug console:
    Detected an attempt to call a symbol in system libraries that is not present on the iPhone:
    pthread_cond_wait$UNIX2003 called from function _ZN5boost18condition_variable4waitERNS_11unique_lockINS_5mutexEEE in image Little Go.
    If you are encountering this problem running a simulator binary within gdb, make sure you 'set start-with-shell off' first.
- Find a way in Xcode how to specify different base SDKs for the iPhone (Device)
  and the iPhoneSimulator builds. Without this, 1) it's impossible to reference
  such builds of 3rdparty libs in an elegant way; and 2) linking a 4.2 simulator
  Xcode build against a 4.1 simulator 3rdparty build is a mismatch that is
  asking for trouble. If a solution is found, remove the hack in function
  INSTALL_STEPS_SOFTWARE() in build-fuego.sh which creates an SDK directory
  symlink as a workaround for this Xcode limitation.


Priority 3 (not important)
-------------------------
- There is a nice HOWTO written by Apple that shows how to create Xcode
  documentation sets with Doxygen. Might be worthwile to check this out:
  http://developer.apple.com/tools/creatingdocsetswithdoxygen.html
- In the iOS Simulator, using the mouse to pan outside the board sometimes
  triggers a PlayMove. This seems to happen only when the left or right edges
  are passed, and only in the simulator environment. In my opinion this is a bug
  in the simulator and/or UIPanGestureRecognizer: The gesture recognizer sends
  a message for state UIGestureRecognizerStateEnded while its locationInView:()
  method still returns a valid, on-board position. I set this problem to a low
  priority because the erroneous behaviour cannot be observed on the iPhone
  device.
- In a computer vs. computer game, consider automatically pausing the game if
  the user leaves the "Play" tab.
